(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function o(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(n){if(n.ep)return;n.ep=!0;const c=o(n);fetch(n.href,c)}})();const b=(e,t)=>e.name.official.localeCompare(t.name.official),x=(e,t)=>t.name.official.localeCompare(e.name.official),O=e=>e||"No capital",P=e=>e?Object.values(e):"No language to display",p={ascendingMode:b,descendingMode:x,getCapital:O,getLanguage:P},h=document.querySelector(".modal"),C=document.querySelector(".overlay"),D=document.querySelector(".close-modal"),I=document.querySelector(".country"),B=document.querySelector(".country__content"),j=()=>{h.classList.remove("hidden"),C.classList.remove("hidden")},k=()=>{h.classList.add("hidden"),C.classList.add("hidden")},r={openModal:j,closeModal:k,modal:h,overlay:C,btnCloseModal:D,country:I,countryContent:B},f=document.querySelector("#countries"),v=document.querySelector("#toggle"),A=document.querySelector("#previous"),T=document.querySelector("#next"),L="Ascending Mode",y="Descending Mode",g=10;let i=1,a=0,d=10;const M=document.querySelector("#search"),E=e=>{a=(e-1)*g,d=a+g},_=async()=>await(await fetch("https://restcountries.com/v3.1/all")).json(),G=async e=>await(await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${e}`)).json(),l=e=>{const t=document.createElement("td");return t.textContent=e,t},S=e=>{e.map(t=>{const o=document.createElement("tr"),{name:{official:s},capital:n,region:c,languages:u,population:w,flag:q}=t;o.appendChild(l(s)),o.appendChild(l(p.getCapital(n))),o.appendChild(l(c)),o.appendChild(l(p.getLanguage(u))),o.appendChild(l(w)),o.appendChild(l(q)),o.addEventListener("click",async()=>{const N=await G(s);r.openModal(),r.country.textContent=s,r.countryContent.textContent=N.extract}),r.btnCloseModal.addEventListener("click",r.closeModal),r.overlay.addEventListener("click",r.closeModal),f.appendChild(o)})},m=e=>{for(;f.firstChild;)f.removeChild(f.firstChild);S(e)};window.addEventListener("DOMContentLoaded",async()=>{const e=await _();e.sort(p.ascendingMode),S(e.slice(a,d));let t=y;v.addEventListener("click",()=>{t=t===y?L:y,v.textContent=t,e.sort(t===L?p.descendingMode:p.ascendingMode),m(e.slice(a,d))}),A.addEventListener("click",()=>{i>1&&(i--,E(i),m(e.slice(a,d)))}),T.addEventListener("click",()=>{const o=Math.ceil(e.length/g);i<o&&(i++,E(i),m(e.slice(a,d)))}),M.addEventListener("keyup",()=>{const o=e.filter(s=>s.name.official.includes(M.value));m(o.slice(a,d))})});
